LOCALIZATION vs LIO-SAM
===

### 1. Circle ë¹„êµ - EKF original
- 1ë°”í€´

![rqt_multiplot](https://user-images.githubusercontent.com/108650199/190341767-15d7cf07-8f51-48cb-9d2d-c40673315f5c.png)

- 3ë°”í€´
![rqt_multiplot 3](https://user-images.githubusercontent.com/108650199/190341770-7ced6fa4-bd8c-4a64-9853-4c4cca678ee3.png)

### 2. Circle ë¹„êµ - EKF param ìˆ˜ì •
#### - EKF param ìˆ˜ì • : Frequency
  - frequench : 30 > 10
  - ê³„ë‹¨ì€ ë§ì´ ì—†ì–´ì¡Œì§€ë§Œ ë¶ˆì•ˆì •í•œ ê°’ì„ ë¹¨ë¦¬ ë°›ë‹¤ë³´ë‹ˆ ì˜¤ì°¨ ë°œìƒ > ì´ì „ ê°’ìœ¼ë¡œ ë‹¤ìŒ ê°’ ì¶”ì •í•˜ë‹ˆ ë” ì»¤ì§ 
  - ì‹œê°„ì´ ì§€ë‚˜ë©´ nan ë°œìƒ
  
![frequency 10](https://user-images.githubusercontent.com/108650199/190347662-f9eeeb75-ab3e-4e36-b524-b459c2f9b3e2.png)

#### - EKF param ìˆ˜ì • : pose, twsit ì¶”ê°€ ë° odometry/navsatê³¼ velodyne_lidar/imuê°€ ë°›ì•„ë“œë¦¬ëŠ” ê°’ ê·¸ëŒ€ë¡œ false > true change
  - odometry > pose(pose, orientation) / twist(linear, angular)
  - imu > orientation, angular velocity, linear accelation
  - ì´ˆë°˜ì—” EKF ë²„ë²…
  - ì‹œê°„ì´ ì§€ë‚˜ë©´ ì•ˆì •ì ì´ê²Œ ë³€í•¨
  
> ì´ˆë°˜
  ![pose,twist plus 3](https://user-images.githubusercontent.com/108650199/190350135-c3996a00-8b6f-4e3f-aad4-1b35ca5a83ba.png)
  
> ì‹œê°„ì´ ì§€ë‚˜ê³  ë‚˜ì„œ (3ë°”í€´ ì´í›„)
  ![pose,twist plus 3 later](https://user-images.githubusercontent.com/108650199/190350144-d238b362-bbe2-4b46-a89d-946448f8c68e.png)

- odom0 config ìˆ˜ì •
```
odom0_config: [true,  true,  true,
               true, true, true,
               true, true, true,
               true, true, true,
               false, false, false]
```

- pose, twist ì¶”ê°€ (navsatêº¼)
```
pose0: odometry/navsat/pose
pose0_config: [true,  true,  false,
               true, true, false,
               false, false, false,
               false, false, false,
               false, false, false]
pose0_differential: true
pose0_relative: false
pose0_queue_size: 5
pose0_rejection_threshold: 2  # Note the difference in parameter name
pose0_nodelay: false

twist0: odometry/navsat/twist
twist0_config: [false, false, false,
                false, false, false,
                true,  true,  true,
                true, true, true,
                false, false, false]
twist0_queue_size: 3
twist0_rejection_threshold: 2
twist0_nodelay: false
```

- imu0 config ìˆ˜ì •
```
imu0_config: [false, false, false,
              true,  true,  true,
              false, false, false,
              true,  true,  true,
              true, true, true]
```

#### - EKF param ìˆ˜ì • : world frame odom > map (ì™œëƒ? GPS ì´ì‚° ì ˆëŒ€ ê°’ì´ë¯€ë¡œ)
  - ì›ë˜ odomì´ ê¸°ë³¸ê°’ì¸ë° gps ê°’ ì“°ë‹ˆê¹Œ world frame ë°”ê¿”ë´„
  - ì‹œê°„ì´ ì§€ë‚˜ë‹ˆ íŠ€ë˜ë°, ì´ìƒí•´ì„œ ë‹¤ì‹œ í•´ë´¤ë”ë‹ˆ íŠ X (ìµœì†Œ 10ë°”í€´)
  
  > ì´ˆë°˜
  ![world frame map 1](https://user-images.githubusercontent.com/108650199/190357088-55aa7630-9b50-4667-8c54-baf991c99b09.png)

 > ì‹œê°„ ì§€ë‚¨
  ![world frame map later](https://user-images.githubusercontent.com/108650199/190357092-fd5e7584-3124-40ee-bb5f-2a73c29dc791.png)

 > ë‹¤ì‹œ í•œ ë²ˆ ë”  
  ![world frame map new](https://user-images.githubusercontent.com/108650199/190357096-5aa4b735-55fe-47a7-a4ed-555f6ced9dda.png)


---

## 220916 
#### - EKF param ìˆ˜ì • : 15ì¼ ë‚  ì½”ë“œë¥¼ ë‹¤ì‹œ ì¼œë³¸ ê²ƒì¼ ë¿ > world frame ë³€ê²½ ë° odom config, imu config, pose, twist ê¸°ë³¸ ê·¸ëŒ€ë¡œ ë°”ê¿ˆ
- ë˜‘ê°™ì€ ì½”ë“œë¡œ ë˜‘ê°™ì´ ì§„í–‰í–ˆëŠ”ë° ë¯¸ì¹œë“¯ì´ íŠ
- ê·¸ë˜ì„œ odom(navsat)ì„ poseë§Œ trueë¡œ ì¤Œ
> world frame : map
 - ê·¼ë° ë‚˜ì¤‘ì— nanìœ¼ë¡œ
 - ë¿ë§Œ ì•„ë‹ˆë¼ ì–˜ëŠ” ì§„ì§œ ë¯¸ì¹œë“¯ì´ íŠ 
![16 world frame map, odom poseë§Œ](https://user-images.githubusercontent.com/108650199/190542924-ed457787-aea4-49f3-853b-cb5ce6ee2928.png)

> world frame : odom
![16 world frame odom, odom poseë§Œ](https://user-images.githubusercontent.com/108650199/190542928-7b1a50b3-22f7-4db0-8b83-989f2a716f05.png)

#### - EKF param ìˆ˜ì • : world frame map, config ë°”ê¾¼ê±° ê·¸ëŒ€ë¡œ, ê³µë¶„ì‚°ì„ lio samì˜ covariance ë³µë¶™
- lio_samì˜ covariance
```
process_noise_covariance: [  1.0,  0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    1.0,  0,    0,    0,    0,    0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    10.0, 0,    0,    0,    0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0.03, 0,    0,    0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0.03, 0,    0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0.1,  0,     0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0.25,  0,     0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0.25,  0,     0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0.04,  0,    0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0.01, 0,    0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0.01, 0,    0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0.5,  0,    0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,    0.01, 0,      0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,    0,    0.01,   0,
                               0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,    0,    0,      0.015]
```

> ì²˜ìŒ

![16 map, covariance first](https://user-images.githubusercontent.com/108650199/190554341-d712210a-757c-4e1c-aff1-641e0623c3ee.png)

> ë§ˆì§€ë§‰

![16 map, covariance later](https://user-images.githubusercontent.com/108650199/190554344-017b6d2a-2e6f-4d48-a547-f9fed76f96d3.png)

> ë°˜ë³µ

- ì²˜ìŒë¶€í„°
![local vs lio ](https://user-images.githubusercontent.com/108650199/190555026-5421769f-0dee-481f-ab7c-65bc94314601.gif)

- ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡
![local vs lio later](https://user-images.githubusercontent.com/108650199/190555031-fb4e9e6d-99d9-4aa5-9a59-fcb169dd115a.gif)


------


## ğŸ’¥ï¸ ìµœì¢… ğŸ’¥ï¸ 

#### - parameter ìˆ˜ì •
  - Frequency(30), world frame(map), odom/imu config, odom pose/twist, process noise covariance ìˆ˜ì •

![image](https://user-images.githubusercontent.com/108650199/190581986-f0c0eb1f-a83d-4d31-b170-9bc4c3b2741c.png)

![image](https://user-images.githubusercontent.com/108650199/190582165-c191e7c0-e432-490f-8e20-0ea51904aca7.png)

  - location (5,5,5)

![image](https://user-images.githubusercontent.com/108650199/190582268-2fb9dc01-fc1b-4547-8f24-6104597eef10.png)

