Pose graph optimization - isam, g2o
===

- Graph based slamì—ì„œ pose graph optimizationí• ë•Œ, ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ g2oì™€ isam

g2oì˜ optimizationì€ bundle adjustmentì™€ ìœ ì‚¬í•œ ì „í˜•ì ì¸ nonliear optimizationê°™ì€ë° ì‚¬ìš©í•´ì„œ ì“°ê¸° ë‚˜ë¦„ì¸ê±°ê°™ê³ 
isamì€ ì‚¬í›„í™•ë¥ ê¸°ë°˜ì˜ information matrixë¥¼ ë§Œë“¤ì–´ì„œ ìµœì í™”
ì¸í¬ë©”ì´ì…˜ ë§¤íŠ¸ë¦­ìŠ¤ì—ì„œ ìì½”ë¹„ì•ˆë“±ì˜ ë¶ˆí™•ì‹¤ì„± ì •ë³´ë¥¼ ë‹¤ë£¨ê³ ìˆì–´ì„œ ì—£ì§€ì˜ ê´€ê³„ë¥¼ ë‹´ê³ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë ê²ƒê°™ë„¤ìš”

## 0. SAM

> Bayesian belief network representation of th e SLAM problem

![image](https://user-images.githubusercontent.com/108650199/196918378-f84ae053-9a6d-4281-aff7-14aa0a518d90.png)


> The joint probability of all variables and measurements

![image](https://user-images.githubusercontent.com/108650199/196918442-0f142415-01f8-422c-8024-47395329ef0f.png)

- SLAMì˜ back-endëŠ” ìœ„ ìˆ˜ì‹ê³¼ ê°™ì€ joint probabilityë¥¼ ìµœëŒ€í™”í•˜ëŠ” ê³¼ì •

  ![image](https://user-images.githubusercontent.com/108650199/196918618-2e61f249-8395-483a-a486-ee37c52e8a10.png)

  - joint probabilityë€ ? ê²°í•© ë¶„í¬ë€ í™•ë¥  ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì¼ ë•Œ ì´ë“¤ì„ í•¨ê»˜ ê³ ë ¤í•˜ëŠ” í™•ë¥  ë¶„í¬
 
- ê·¸ë ‡ê²Œ joint probabilityê°€ ìµœëŒ€í™”í•˜ëŠ” ê³¼ì •ì„ í’€ë‹¤ë³´ë©´ non-linearìƒí™©ì—ì„œ least square í˜•íƒœë¡œ ë°”ë€Œê²Œ ë¨
  - ìœ„ì—ì„œ êµ¬í•œ least square ë¬¸ì œë¥¼ í’€ë•Œ ì£¼ë¡œ Cholesky factorizationê³¼ QR factorization(decomposition)ì„ ì‚¬ìš©
  - ì™œ? Least Squareì€ AâˆˆRmÃ—n, mâ‰¥n, ì¦‰ AëŠ” ê¸¸ê³  ê°€ëŠ” í–‰ë ¬ì´ê³  bâˆˆRmÃ—1ì¸ ë°©ì •ì‹ Ax=bê°€ ìˆë‹¤ê³  ê°€ì • 
    - SLAMì—ì„œëŠ” m>n 
  - Ax=bì¸ xë¥¼ ì°¾ê³  ì‹¶ìŒ
  - but, m>nì´ë¼ ê³„ì‚°í•˜ê¸° ì–´ë ¤ì›€ ê·¸ëŸ´ ë•Œ QR ë¶„í•´ë¥¼ ì“°ëŠ”ê²ƒ

  ![image](https://user-images.githubusercontent.com/108650199/196920250-7819c6a3-8a2f-4b1e-af0f-6ed92a785053.png)


## 1. ISAM: Incremental Smoothing and Mapping
- fast incremental matrix factorizationì„ ê¸°ë°˜ìœ¼ë¡œ í•¨
  - Incremental computing : ì¦ë¶„ ê³„ì‚°ì€ ë°ì´í„° ì¡°ê°ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë³€ê²½ëœ ë°ì´í„°ì— ì˜ì¡´í•˜ëŠ” ì¶œë ¥ë§Œ ë‹¤ì‹œ ê³„ì‚°í•˜ì—¬ ì‹œê°„ì„ ì ˆì•½í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê¸°ëŠ¥

  ![image](https://user-images.githubusercontent.com/108650199/196913848-8c480022-56f6-482b-8b86-0a34f3023ec6.png)
 
  - Matrix Factorizaion : User-Item Matrixë¥¼ User/Item Latent Matrixë¡œ í–‰ë ¬ë¶„í•´í•˜ëŠ” ë°©ë²•ë¡ 
    - Latent : ì ì¬ì ì¸
- ìì—°ì ìœ¼ë¡œ sparse smoothing information matrixì˜ QR factorizationë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ ì‹¤ì œë¡œ ë³€ê²½ë˜ëŠ” matrix í•­ëª©ë§Œ ë‹¤ì‹œ ê³„ì‚°í•¨ìœ¼ë¡œì¨ íš¨ìœ¨ì ì´ê³  ì •í™•í•œ ì†”ë£¨ì…˜ ì œê³µ
  - sparse matrix : í–‰ë ¬ì˜ ëŒ€ë¶€ë¶„ì˜ ìš”ì†Œê°€ 0ì¸ í–‰ë ¬
- ISAMì€ ì£¼ê¸°ì ì¸ ë³€ìˆ˜ ì¬ì •ë ¬ì„ í†µí•´ factor matrixì— ë¶ˆí•„ìš”í•œ ì±„ìš°ê¸°ë¥¼ ë°©ì§€í•˜ë¯€ë¡œ ë£¨í”„ê°€ ë§ì€ ë¡œë´‡ ê¶¤ì ì—ì„œë„ íš¨ìœ¨ì 
- ë˜í•œ, ì‹¤ì‹œê°„ìœ¼ë¡œ data associationì´ ê°€ëŠ¥í•˜ë„ë¡ factored information matrixë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì • uncertaintiesì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” íš¨ìœ¨ì ì¸ ì•Œê³ ë¦¬ì¦˜ ì œê³µ
##### - ë‹¤ì‹œ [ì •ë¦¬](https://jml-note.tistory.com/entry/iSAMincremental-Smoothing-and-Mapping?category=946717) 
- ğŸ’¥ï¸ Incremental smoothing and mappingì€ ìƒˆë¡œìš´ measurementê°€ ë“¤ì–´ì™”ì„ ë•Œ ë¶ˆí•„ìš”í•œ ê³„ì‚°ì„ í•˜ì§€ ì•ŠëŠ”ê²ƒì´ ëª©ì  ğŸ’¥ï¸
- iSAMì€ ìƒˆë¡œìš´ measurementê°€ ë“¤ì–´ì˜¤ê²Œë˜ë©´ ì´ì „ì— ê³„ì‚°í•œ ê°’ ì¬ì‚¬ìš©í•˜ê³  ìƒˆë¡œìš´ ê°’ì— ì˜í•´ ì˜í–¥ì„ ë°›ëŠ” entryë§Œ ê³„ì‚°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ square root information matrixë¥¼ ì—…ë°ì´íŠ¸
- point cloudë„ sparse matrixì„

![image](https://user-images.githubusercontent.com/108650199/196921011-d422e639-bfe0-47d5-ba34-86e9831891fb.png)

![image](https://user-images.githubusercontent.com/108650199/196930729-80b113bd-8811-495b-ba4a-b8ca2d786538.png)

- ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ loopì´ ìƒê¸°ê²Œ ë˜ë©´ í–‰ë ¬ Rì—ì„  localy dense í•œ ì˜ì—­ì´ ë§Œë“¤ì–´ì§€ê³ , back-substitution ì˜ complexityê°€ ì˜¬ë¼ê°
- ì´ëŸ° fill-inì„ í”¼í•˜ê¸° ìœ„í•´ variable reordering techniqueì„ ì´ìš©

## 2. g2o(General Graph Optimization)

![image](https://user-images.githubusercontent.com/108650199/196927871-efebdf2d-07de-4492-b7ca-d58cd4d19052.png)

- ê·¸ë˜í”„ ê¸°ë°˜ non-linear least squareì„ ìµœì í™”í•˜ê¸° ìœ„í•œ ì˜¤í”ˆ ì†ŒìŠ¤ C++ í”„ë ˆì„ì›Œí¬
- í”„ë ˆì„ì›Œí¬ì—ì„œ Pose graph optimisationì„ í‘¸ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” Gauss-Newton, Levenberg-Marquardt, Doglog ë°©ì‹ì„ ì§€ì›
- ì‚¬ìš©í•˜ê¸° êµ‰ì¥íˆ ì‰¬ìš´ í¸ì´ê¸° ë•Œë¬¸ì— Visual-SLAM ì—°êµ¬/ê°œë°œì—ì„œ ë§ì´ ì‚¬ìš©í•˜ë©°, ORB-SLAMê³¼ SVOì—ì„œë„ ì‚¬ìš©
- ORB SLAMê³¼ LSD SLAMì—ì„œ g2oê°€ ì‚¬ìš©ë¨
- schur : linear structureë¡œ Hí–‰ë ¬ì€ ì›¬ë§Œí•˜ë©´ ë‹¤ í¬ì†Œí–‰ë ¬
  - ë¯¸ë¦¬ êµ¬ì¡° ì•Œê³ ìˆìœ¼ë©´ densifyí•˜ê³  ì—­í–‰ë ¬í’€ë©´ ì‹œê°„ê³¼ ê³µê°„ ì ˆì•½ê°€ëŠ¥ ì´ë¥¼ schurë¼ê³  í•¨ 
  - ê·¸ë¦¬ê³  í’€ê¸°ìœ„í•´ì„œë¼ë©´ ë¸”ë¡í™”í•´ì•¼ë¨ ì´ë°©ë²•ì€
- Hí–‰ë ¬ì˜ êµ¬ì¡°ì™€ ì—­í–‰ë ¬ ê³„ì‚° ë°©ë²•ì´ ì •ì˜ë˜ë©´ ë§ˆì¹¨ë‚´ ì†”ë²„ ìœ í˜•ì„ ì •ì˜í•  ìˆ˜ ìˆìŒ
- ì†”ë²„ ìœ í˜•ì€ ì—­í–‰ë ¬ê³¼ í¬ì†Œ í–‰ë ¬ì˜ êµ¬ì¡°ë¥¼ í‘¸ëŠ” ë°©ë²•ì„ ì •ì˜

> g2o ì ìš©

![image](https://user-images.githubusercontent.com/108650199/196927827-44b6d24f-bb88-465d-bf6e-27994db832d1.png)

